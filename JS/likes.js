data = {
  "pilots" : [
    {
      "name": "Lewis Hamilton",
      "image": [
        "hamilton1.jpg",
        "hamilton2.jpg",
        "hamilton3.jpg"
      ],
      "about": "Лью́ис Карл Дэ́видсон Хэ́милтон (род. 7 января 1985 года, Стивенидж, Хартфордшир, Англия, Великобритания) — британский автогонщик команды Формулы-1 «Мерседес». Семикратный чемпион мира. Хэмилтон — первый в истории гонщик Формулы-1, одержавший 100 побед. В 2020 году он также повторил рекорд Михаэля Шумахера, выиграв 7 чемпионских титулов, также стал первым темнокожим пилотом в Формуле-1. В своём первом сезоне в Формуле-1 Льюис Хэмилтон установил множество рекордов, стал вице-чемпионом, проиграв всего одно очко чемпиону Кими Райкконену, зато на следующий год он стал чемпионом."
    },
    {
      "name": "Max Verstappen",
      "image": [
        "verstappen1.jpg",
        "verstappen2.webp",
        "verstappen3.jpg",
        "verstappen4.webp"
      ],
      "about" : "Ма́кс Эми́лиан Ферста́ппен (род. 30 сентября 1997, Хасселт, Бельгия) — потомственный нидерландский автогонщик. Пилот команды «Ред Булл Рейсинг» «Формулы-1». Двукратный чемпион мира «Формулы-1» в сезонах 2021 и 2022. Макс Ферстаппен — из автоспортивной семьи: его отец Йос с 1994 по 2003 год выступал в Формуле-1, мать Софи Кумпен участвовала в турнирах по картингу в юношеском возрасте, а дядя Энтони и дед Пол соревновались в гонках GT. Хотя мать Ферстаппена бельгийка, а сам он родился и вырос в Бельгии, Ферстаппен заявляет, что больше чувствует себя голландцем, поэтому выступает под нидерландской лицензией."
    },
    {
      "name": "Niki Lauda",
      "image": [
        "lauda1.webp",
        "lauda2.jpg",
      ],
      "about" :"Андре́ас Никола́ус (Ни́ки) Ла́уда (22 февраля 1949, Вена, Оккупированная союзниками Австрия — 20 мая 2019, Цюрих, Швейцария) — австрийский автогонщик, трёхкратный чемпион мира в классе Формула-1. Впоследствии спортивный менеджер, комментатор немецкого телеканала RTL, эксперт по автогонкам, неисполнительный директор команды Формулы-1 Mercedes AMG. В 2013 году сняли фильм «Гонка» о противостоянии Джеймса Ханта и Ники Лауды. Роль Лауды сыграл немецко-испанский актёр Даниэль Брюль."
    },
    {
      "name": "Michael Schumacher",
      "image": [
        "msh1.jpg",
        "msh2.jpg",
        "msh3.jpg"
      ],
      "about" : "Михаэ́ль Шума́хер (род. 3 января 1969, Хюрт-Хермюльхайм, Северный Рейн-Вестфалия) — немецкий автогонщик Формулы-1, семикратный чемпион мира. Считается одним из лучших пилотов F1 в истории. Обладатель многочисленных рекордов чемпионата мира Формулы-1. Уже после завершения карьеры получил тяжёлую травму головы в конце 2013 года в результате несчастного случая. Семья Шумахера живёт в Швейцарии, недалеко от Женевского озера, в городке Вуффленс-ле-Шато. Младший брат Михаэля Шумахера Ральф также стал известным автогонщиком. 22 марта 1999 года родился сын Мик, который пошёл по стопам отца. С 2021 года — пилот Формулы-1."
    }
  ],



    "tracks" : [
      {
        "name": "Monza",
        "image": [
          "monza1.png",
          "monza2.jpg",
          "monza3.png"
        ],
        "about": "Национальный автодром Монцы (итал. Autodromo Nazionale di Monza, разг. Монца) — гоночная трасса возле города Монца в Италии, к северу от Милана. Являясь одной из старейших гоночных трасс мира, она обладает богатой историей с элементами легендарности. Трасса наиболее известна проведением Гран-при Италии Формулы-1 и примечательна тем, что пилоты проходят её на высокой, в целом, скорости, из-за длинных прямых участков. Это самая быстрая трасса современной Формулы-1, на ней установлен рекорд скорости на круге и второй по величине абсолютный результат максимальной скорости. Считается, что эта трасса более требовательна к мощности мотора, нежели к аэродинамическим качествам машины и мастерству гонщика."
      },
      {
        "name": "Spa-Francorchamps",
        "image": [
          "spa1.jpg",
          "spa2.webp",
          "spa3.jpg",
          "spa4.png"
        ],
        "about" : "Трасса Спа-Франкоршам (фр. Circuit de Spa-Francorchamps) — гоночная трасса в Бельгии. Является одной из самых известных кольцевых трасс, многие пилоты и болельщики называют Спа-Франкоршам самой интересной трассой в мире. Особой известностью пользуется связка поворотов О Руж. В настоящее время на трассе проводятся гонки «Формулы-1» Гран-при Бельгии, 24 часа Спа, GP2 и других кольцевых серий автоспорта. В 2019 году на трассе прошёл этап чемпионата мира по ралли-кроссу."
      },
      {
        "name": "Reb Bull Ring",
        "image": [
          "rbring1.jpg",
          "rbring2.jpg",
          "rbring3.png"
        ],
        "about" :"«Ред Булл Ринг» (нем. Red Bull Ring) — гоночная трасса, расположенная близ деревни Шпильберг (Штирия, Австрия). Владельцем автодрома является компания Red Bull. На трассе было проведено 34 Гран-при Австрии в период с 1970 по 2021 год и два Гран-при Штирии в 2020 и 2021 годах. В момент основания трасса была названа «Эстеррайхринг» (нем. Österreichring), позднее она была перестроена и по окончании работ переименована в «А1-Ринг». В 2004 году трасса была снесена и вновь выстроена компанией Red Bull в 2008 году. В 2011 году на «Ред Булл Ринге» прошли первые за 8 лет автомобильные соревнования."
      },
      {
        "name": "Daytona",
        "image": [
          "daytona1.jpg",
          "daytona2.jpg",
          "daytona3.jpg",
          "daytona4.png"
        ],
        "about" :"Daytona International Speedway - гоночная трасса в Дейтона-Бич, штат Флорида, США. С момента открытия в 1959 году здесь проводится Daytona 500, самая престижная гонка в NASCAR, а также мероприятие, открывающее сезон. Помимо гонок NASCAR, на трассе также проводятся гонки ARCA, AMA Superbike, IMSA, SCCA и мотокросс. Трасса имеет несколько планировок, включая основную высокоскоростную трассу tri-oval протяженностью 2,500 миль (4,023 км), трассу для спортивных автомобилей протяженностью 3,560 миль (5,729 км), трассу для мотоциклов протяженностью 2,950 миль (4,748 км) и трассу для картинга и мотоциклов протяженностью 1,320 футов (400 м)."
      },
      {
        "name": "Laguna Seca",
        "image": [
          "lagunaseka1.jpg",
          "lagunaseka2.png",
          "lagunaseka3.png"
        ],
        "about" :"Уизертек Рэйсуэй Лагуна Сека (англ. WeatherTech Raceway Laguna Seca) — кольцевая гоночная трасса, расположенная рядом с городом Монтерей в штате Калифорния, США. Используется для проведения авто- и мотогонок, принимает этапы многих международных и национальных американских чемпионатов. Имеет множество подъёмов и спусков с общим перепадом высот 91 метр. Связка поворотов «Штопор» (англ. Corkscrew) считается одной из самых известных на гоночных трассах в мире, сравнима по популярности с Eau Rouge на трассе Спа-Франкоршам в Бельгии и Grand Hotel на городской трассе в Монако. Отличается крайней сложностью, поскольку повороты 8 и 8a в момент торможения не видно. После разгонной прямой в гору поворот 8 резко уходит налево и вниз, после чего практически сразу идёт правый поворот 8a."
      }
    ],



    "series" : [
      {
        "name": "Formula 1",
        "image": [
          "formula11.jpg",
          "formula12.jpg",
          "formula13.jpg",
          "formula14.jpg",
          "formula15.jpg"
        ],
        "about": "Формула-1 (англ. Formula One, Formula 1) — чемпионат мира по кольцевым гонкам, который проводится ежегодно и состоит из этапов (называемых Гран-при), в соответствии с техническими нормами, требованиями и правилами, установленными Международной автомобильной федерацией (FIA). Название происходит от набора технических правил (т. н. «формулы»), которому должны соответствовать автомобили всех участников. Турнир находится под управлением Международной автомобильной федерации, ответственной за продвижение на данный момент является группа компаний Formula One Group. Чемпионат мира проводится каждый год и состоит из отдельных этапов, имеющих статус Гран-при, в конце года подводятся итоги турнира, с учётом суммы набранных за сезон очков. В Формуле-1 соревнуются как отдельные гонщики (за титул чемпиона мира среди гонщиков), так и отдельные команды (за титул чемпиона мира среди конструкторов, для которого в русском языке часто используется его историческое название «Кубок конструкторов»)."
      },
      {
        "name": "NASCAR",
        "image": [
          "nascar1.jpg",
          "nascar2.jpg",
          "nascar3.jpg",
          "nascar4.jpg"
        ],
        "about" : "Национальная ассоциация гонок серийных автомобилей (National Association of Stock Car Auto Racing), Inc — частное предприятие, занимающееся организацией автомобильных гонок и сопутствующей деятельностью. Учреждена Биллом Франсом-старшим в 1947—1948 годах в Соединенных Штатах Америки и до сих пор находится в собственности семьи Франс. Ассоциация проводит большое количество различных чемпионатов (серий). Три самых крупные серии NASCAR — NASCAR Cup Series, NASCAR Xfinity Series и NASCAR Camping World Truck Series. Региональный дивизион — NASCAR Whelen All-American Series, NASCAR Whelen Modified Tour (автомобили с открытыми колёсами), NASCAR K&N Pro Series и т. д. Серии проводятся и за пределами США — в Мексике (NASCAR Toyota Series), Канаде (NASCAR Canadian Tire Series), Европе (NASCAR Whelen Euro Series)."
      },
      {
        "name": "Rallycross",
        "image": [
          "rallycross1.jpg",
          "rallycross2.jpg",
          "rallycross3.jpg"
        ],
        "about" :"Чемпионат мира по ралли-кроссу (FIA World Rallycross Championship, официальная аббревиатура World RX или WRX) — чемпионат мира по ралли-кроссу, серия автомобильных соревнований. Ралли-кросс — это форма автомобильных гонок в спринтерском стиле, проводимая на закрытой гоночной трассе со смешанным покрытием, с модифицированными серийными или специально построенными дорожными автомобилями, аналогичными мировым раллийным автомобилям. В основном он популярен в скандинавских странах, Нидерландах, Бельгии, Франции и Великобритании."
      }
    ],



  "news": [
    {
      "title": "МАКС ФЕРСТАППЕН: Я СНОВА БУДУ ИСПОЛЬЗОВАТЬ ПЕРВЫЙ НОМЕР",
      "href": "https://autosport.com.ru/f1/80716-maks-ferstappen-ya-snova-budu-ispolzovat-pervyy-nomer",
      "legend": "Голландец не собирается отказываться от чемпионской единички"
    },
    {
      "title": "ЛЬЮИС ХЭМИЛТОЛ ВПЕРВЫЕ В КАРЬЕРЕ НЕ ВЫИГРАЛ НИ ОДНОЙ ГОНКИ ЗА СЕЗОН",
      "href": "https://autosport.com.ru/f1/80665-lyuis-hemiltol-vpervye-v-karere-ne-vyigral-ni-odnoy-gonki-za-sezon",
      "legend": "Семикратный чемпион мира провёл свой худший сезон"
    },
    {
      "title": "«В 9 ИЗ 10 СЛУЧАЕВ ТЫ ЧЕМПИОН». ДЖОРДЖ РАССЕЛ ВЫСКАЗАЛСЯ О ПОБЕДЕ НАД ХЭМИЛТОНОМ",
      "href": "https://autosport.com.ru/f1/80668-dzhordzh-rassel-vyskazalsya-o-pobede-nad-lyuisom-hemiltonom",
      "legend": "Молодой британский гонщик повторил достижения Дженсона Баттона и Нико Росберга"
    }
  ]
}


var array = [];
var allItems = data.pilots.concat(data.tracks).concat(data.series);
var news = data["news"];

//localStorage.clear();
copyToArray();

function likeButton(clickedElement, name) {

    let element;
    for (let elem of allItems) {
        if (elem.name == name) {
            element=elem;
            break;
        }
    }
    let index = -1, i = 0;
    for (let elem of array) {
        if (elem.name == element.name) {
            index = i; break;
        }
        i++;
    }
    if (index!=-1) {
        array.splice(index, 1);
        let but = clickedElement;
        but.innerHTML = '<img class="like-icon" src="pictures/heart.png" width="50px">';
    }
    else {
        array.push(element);
        let but = clickedElement;
        but.innerHTML = '<img class="like-icon" src="pictures/heart-filled.png" width="50px">';
    }
    copyToLocalStorage();
    makeLikePage();
}

function makeLikePage() {
    let element = document.getElementById('around');
    if (element!=null) {
        element.innerHTML = '';
        if (array.length==0) {
            element.insertAdjacentHTML('beforeend', '<p style="color:#dbdbdb;text-align:center;grid-column:1 / 3;">В избранном пусто</p>');
        }
        else {
            for (let i = 0; i<array.length; i++) {
                element.insertAdjacentHTML('beforeend', '<div class="around-elem">'+
                    '<a href="about.html?name='+array[i].name+'">'+
                     '<div class="around-overflow" id="around-overflow'+(i%4+1)+'"></div>'+
                     '<div class="img">'+
                     '    <img src="pictures/photos/'+array[i].image[0]+'" class="image">'+
                     '</div>'+
                     '<p class="around-text">'+array[i].name+'</p>'+
                     '</a>'+
                     '<div class="around-bottom">'+
                     '    <div class="around-legend">'+(i+1)+'</div>'+
                     '    <button type="button" class="like" onclick="likeButton(this, \''+array[i].name+'\')"><img class="like-icon" src="pictures/heart-filled.png" width="50px"></button>'+
                     '</div><br>'+
                '</div>');
            }
        }
    }
}

function checkLikes() {
    let buttons = document.getElementsByClassName('like');
    for (let elem of buttons) {
        let att = elem.getAttribute('onclick');
        for (let arrElem of array) {
            if (att.indexOf(arrElem.name)!=-1) {
                elem.innerHTML = '<img class="like-icon" src="pictures/heart-filled.png" width="50px">';
                break;
            }
            else {
                elem.innerHTML = '<img class="like-icon" src="pictures/heart.png" width="50px">';
            }
        }
    }
}

function copyToLocalStorage() {
    localStorage.clear();
    for (let i = 0; i<array.length; i++) {
        localStorage.removeItem(i);
        localStorage.setItem(i, JSON.stringify(array[i]));
    }
}
function copyToArray() {
    array = [];
    for (let i = 0; i<localStorage.length; i++) {
        if (localStorage.getItem(i) != null) {
            array.push(JSON.parse(localStorage.getItem(i)));
        }
    }
}


function loadPage(type) {
    let arrayLoad = data[type];
    let element = document.getElementById('article');
    element.innerHTML = '';

    for (let i = 0; i < arrayLoad.length; i++) {

        element.insertAdjacentHTML('beforeend', '<div class="around-elem">'+
            '<a href="about.html?name='+arrayLoad[i].name+'">'+
             '<div class="around-overflow" id="around-overflow'+(i%4+1)+'"></div>'+
             '<div class="img">'+
             '    <img src="pictures/photos/'+arrayLoad[i].image[0]+'" class="image">'+
             '</div>'+
             '<p class="around-text">'+arrayLoad[i].name+'</p>'+
             '</a>'+
             '<div class="around-bottom">'+
             '    <div class="around-legend">'+(i+1)+'</div>'+
             '    <button type="button" class="like" onclick="likeButton(this, \''+arrayLoad[i].name+'\')"><img class="like-icon" src="pictures/heart.png" width="50px"></button>'+
             '</div><br>'+
        '</div>');
    }
    checkLikes();
    loadNews();
}

function loadNews() {
    let element = document.getElementById('sub-news');
    element.innerHTML = '';
    for (let i = 0; i < news.length; i++) {

        element.insertAdjacentHTML('beforeend', '<div style="border: 2px solid #dbdbdb; border-radius: 5px" class="one-news">'+
             '<a style="font-size:16px"'+
                'href="'+news[i].href+'">'+news[i].title+'</a>'+
             '<p style="font-size:14px">'+news[i].legend+'</p>'+
         '</div>'+
         '<br>');
    }
}
function makeLikePageTemp() {
    loadNews();
    makeLikePage();
}


